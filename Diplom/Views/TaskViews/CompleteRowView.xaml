<?xml version="1.0" encoding="utf-8"?>
<ContentView x:Class="Diplom.Views.TaskViews.CompleteRowView"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Name="Root">

    <Grid>
        <VerticalStackLayout Spacing="16">

            <CollectionView x:Name="Row"
                        SelectionMode="None"
                        HeightRequest="100">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Horizontal" ItemSpacing="8"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Image Source="{Binding .}"
                           HeightRequest="90"/>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <CollectionView x:Name="Variants"
                        Margin="0,110,0,0" 
                        SelectionMode="Single"
                        SelectionChanged="OnSel">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Span="3"
                                 HorizontalItemSpacing="12"
                                 VerticalItemSpacing="12" Orientation="Vertical"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Image Source="{Binding .}"
                           Aspect="AspectFill"
                           HeightRequest="90"/>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <Button Text="Ответить"
                    IsEnabled="{Binding IsCompleted, Source={x:Reference Root}}"
                    Clicked="OnAnswer"/>
        </VerticalStackLayout>

        <Grid x:Name="Overlay"
              BackgroundColor="#80000000"
              IsVisible="False">
            <Frame Padding="24" CornerRadius="20"
                   BackgroundColor="White"
                   HorizontalOptions="Center"
                   VerticalOptions="Center">
                <VerticalStackLayout Spacing="16">
                    <Label x:Name="OverlayText"
                           FontAttributes="Bold"
                           FontSize="20"
                           HorizontalOptions="Center"/>
                    <Button Text="Дальше"
                            Clicked="OnContinue"/>
                </VerticalStackLayout>
            </Frame>
        </Grid>
    </Grid>
</ContentView>
